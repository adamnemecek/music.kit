(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";module.exports=function(fn){return function(a,b){if(arguments.length===1)return function(c){return fn(a,c)};return fn(a,b)}}},{}],2:[function(require,module,exports){module.exports={lydian:["1 2 3 4# 5 6 7"],major:["1 2 3 4 5 6 7",["ionian"]],mixolydian:["1 2 3 4 5 6 7b",["dominant"]],dorian:["1 2 3b 4 5 6 7b"],aeolian:["1 2 3b 4 5 6b 7b",["minor"]],phrygian:["1 2b 3b 4 5 6b 7b"],locrian:["1 2b 3b 4 5b 6b 7b"],"melodic minor":["1 2 3b 4 5 6 7"],"melodic minor second mode":["1 2b 3b 4 5 6 7b"],"lydian augmented":["1 2 3 4# 5A 6 7"],"lydian dominant":["1 2 3 4# 5 6 7b",["lydian b7"]],"melodic minor fifth mode":["1 2 3 4 5 6b 7b",["hindu","mixolydian b6"]],"locrian #2":["1 2 3b 4 5b 6b 7b"],"locrian major":["1 2 3 4 5b 6b 7b",["arabian"]],altered:["1 2b 3b 3 5b 6b 7b",["super locrian","diminished whole tone","pomeroy"]],"major pentatonic":["1 2 3 5 6",["pentatonic"]],"lydian pentatonic":["1 3 4# 5 7",["chinese"]],"mixolydian pentatonic":["1 3 4 5 7b",["indian"]],"locrian pentatonic":["1 3b 4 5b 7b",["minor seven flat five pentatonic"]],"minor pentatonic":["1 3b 4 5 7b"],"minor six pentatonic":["1 3b 4 5 6"],"minor hexatonic":["1 2 3b 4 5 7"],"flat three pentatonic":["1 2 3b 5 6",["kumoi"]],"flat six pentatonic":["1 2 3 5 6b"],"major flat two pentatonic":["1 2b 3 5 6"],"whole tone pentatonic":["1 3 5b 6b 7b"],"ionian pentatonic":["1 3 4 5 7"],"lydian #5 pentatonic":["1 3 4# 5A 7"],"lydian dominant pentatonic":["1 3 4# 5 7b"],"minor #7 pentatonic":["1 3b 4 5 7"],"super locrian pentatonic":["1 3b 4d 5b 7b"],"in-sen":["1 2b 4 5 7b"],iwato:["1 2b 4 5b 7b"],hirajoshi:["1 2 3b 5 6b"],kumoijoshi:["1 2b 4 5 6b"],pelog:["1 2b 3b 5 6b"],"vietnamese 1":["1 3b 4 5 6b"],"vietnamese 2":["1 3b 4 5 7b"],prometheus:["1 2 3 4# 6 7b"],"prometheus neopolitan":["1 2b 3 4# 6 7b"],ritusen:["1 2 4 5 6"],scriabin:["1 2b 3 5 6"],piongio:["1 2 4 5 6 7b"],"major blues":["1 2 3b 3 5 6"],"minor blues":["1 3b 4 5b 5 7b",["blues"]],"composite blues":["1 2 3b 3 4 5b 5 6 7b"],augmented:["1 2A 3 5 5A 7"],"augmented heptatonic":["1 2A 3 4 5 5A 7"],"dorian #4":["1 2 3b 4# 5 6 7b"],"lydian diminished":["1 2 3b 4# 5 6 7"],"whole tone":["1 2 3 4# 5A 7b"],"leading whole tone":["1 2 3 4# 5A 7b 7"],"harmonic minor":["1 2 3b 4 5 6b 7"],"lydian minor":["1 2 3 4# 5 6b 7b"],neopolitan:["1 2b 3b 4 5 6b 7"],"neopolitan minor":["1 2b 3b 4 5 6b 7b"],"neopolitan major":["1 2b 3b 4 5 6 7",["dorian b2"]],"neopolitan major pentatonic":["1 3 4 5b 7b"],"romanian minor":["1 2 3b 5b 5 6 7b"],"double harmonic lydian":["1 2b 3 4# 5 6b 7"],diminished:["1 2 3b 4 5b 6b 6 7"],"harmonic major":["1 2 3 4 5 6b 7"],"double harmonic major":["1 2b 3 4 5 6b 7",["gypsy"]],egyptian:["1 2 4 5 7b"],"hungarian minor":["1 2 3b 4# 5 6b 7"],"hungarian major":["1 2A 3 4# 5 6 7b"],oriental:["1 2b 3 4 5b 6 7b"],spanish:["1 2b 3 4 5 6b 7b",["phrygian major"]],"spanish heptatonic":["1 2b 3b 3 4 5 6b 7b"],flamenco:["1 2b 3b 3 4# 5 7b"],balinese:["1 2b 3b 4 5 6b 7"],"todi raga":["1 2b 3b 4# 5 6b 7"],"malkos raga":["1 3b 4 6b 7b"],"kafi raga":["1 3b 3 4 5 6 7b 7"],"purvi raga":["1 2b 3 4 4# 5 6b 7"],persian:["1 2b 3 4 5b 6b 7"],bebop:["1 2 3 4 5 6 7b 7"],"bebop dominant":["1 2 3 4 5 6 7b 7"],"bebop minor":["1 2 3b 3 4 5 6 7b"],"bebop major":["1 2 3 4 5 5A 6 7"],"bebop locrian":["1 2b 3b 4 5b 5 6b 7b"],"minor bebop":["1 2 3b 4 5 6b 7b 7"],"mystery #1":["1 2b 3 5b 6b 7b"],enigmatic:["1 2b 3 5b 6b 7b 7"],"minor six diminished":["1 2 3b 4 5 6b 6 7"],"ionian augmented":["1 2 3 4 5A 6 7"],"lydian #9":["1 2b 3 4# 5 6 7"],ichikosucho:["1 2 3 4 5b 5 6 7"],"six tone symmetric":["1 2b 3 4 5A 6"]}},{}],3:[function(require,module,exports){"use strict";var data=require("./scales.json");var binarySet=require("../gamut.binarySet");module.exports=Object.keys(data).reduce(function(scales,n){var s={name:n,intervals:data[n][0].split(" "),aliases:data[n][1]||[]};s.binary=binarySet(s.intervals);s.decimal=parseInt(s.binary,2);scales[n]=scales[s.binary]=scales[s.decimal]=s;s.aliases.forEach(function(a){scales[a]=s});return scales},{})},{"../gamut.binarySet":5,"./scales.json":2}],4:[function(require,module,exports){"use strict";var height=require("./pitch.height");var operation=require("./gamut.operation");module.exports=operation(function(gamut){return gamut.sort(function(a,b){return height(a)-height(b)})})},{"./gamut.operation":10,"./pitch.height":29}],5:[function(require,module,exports){"use strict";var operation=require("./gamut.operation");var set=require("./gamut.set");var harmonics=require("./gamut.harmonics");var height=require("./pitch.height");module.exports=operation(function(gamut){var number=[0,0,0,0,0,0,0,0,0,0,0,0];var intervals=set(harmonics(gamut));var semitones=intervals.map(height);semitones.forEach(function(s){number[s]=1});return number.join("")})},{"./gamut.harmonics":8,"./gamut.operation":10,"./gamut.set":12,"./pitch.height":29}],6:[function(require,module,exports){var harmonics=require("./gamut.harmonics");var transpose=require("./note.transpose");module.exports=function(notes,tonic){var h=harmonics(notes);return h.map(transpose(tonic))}},{"./gamut.harmonics":8,"./note.transpose":28}],7:[function(require,module,exports){"use strict";var curry=require("./_curry2");var transpose=require("./note.transpose");var INTERVALS=["1P","2m","2M","3m","3M","4","4A","5","6m","6M","7m","7M"];module.exports=curry(function(number,tonic){if(/^1[01]{11}$/.test(number))number=parseInt(number,2);else if(typeof number!=="number")return[];var binary=(number%2048+2048).toString(2);var set=[];for(var i=0;i<12;i++){if(binary.charAt(i)==="1")set.push(INTERVALS[i])}return tonic===false?set:set.map(transpose(tonic))})},{"./_curry2":1,"./note.transpose":28}],8:[function(require,module,exports){var operation=require("./gamut.operation");var setOctave=require("./note.setOctave");var distance=require("./note.distance");module.exports=operation(function(gamut){var notes=gamut.map(setOctave(0));var tonic=notes[0];return notes.map(distance(tonic))})},{"./gamut.operation":10,"./note.distance":18,"./note.setOctave":26}],9:[function(require,module,exports){"use strict";module.exports={ascending:require("./gamut.ascending"),chord:require("./gamut.chord"),harmonics:require("./gamut.harmonics"),operation:require("./gamut.operation"),scale:require("./gamut.scale"),set:require("./gamut.set"),binarySet:require("./gamut.binarySet"),fromBinary:require("./gamut.fromBinary"),split:require("./gamut.split")}},{"./gamut.ascending":4,"./gamut.binarySet":5,"./gamut.chord":6,"./gamut.fromBinary":7,"./gamut.harmonics":8,"./gamut.operation":10,"./gamut.scale":11,"./gamut.set":12,"./gamut.split":13}],10:[function(require,module,exports){var split=require("./gamut.split");var parse=require("./pitch.parse");var build=require("./pitch.str");module.exports=function(fn){return function(source){var g=split(source);if(Array.isArray(g[0]))return fn(g);var v=fn(g.map(parse));return Array.isArray(v)?v.map(build):v}}},{"./gamut.split":13,"./pitch.parse":32,"./pitch.str":35}],11:[function(require,module,exports){"use strict";var operation=require("./gamut.operation");var set=require("./gamut.set");var harmonics=require("./gamut.harmonics");var transpose=require("./note.transpose");var curry=require("./_curry2");module.exports=curry(function(notes,tonic){return intervals(notes).map(transpose(tonic))});var intervals=operation(function(gamut){var l=gamut.length;var s=set(gamut);var i=gamut[0]?indexOf(gamut[0][0],s,l):0;var ordered=s.slice(i,l).concat(s.slice(0,i));return harmonics(ordered).map(function(p){if(p[0]*7+12*p[1]<0)p[1]++;return p})});function indexOf(p,g,l){for(var i=0;i<l;i++){if(g[i][0]===p)return i}}},{"./_curry2":1,"./gamut.harmonics":8,"./gamut.operation":10,"./gamut.set":12,"./note.transpose":28}],12:[function(require,module,exports){"use strict";var simplify=require("./pitch.simplify");var operation=require("./gamut.operation");var ascending=require("./gamut.ascending");module.exports=operation(function(gamut){var sorted=ascending(gamut.map(simplify));return sorted.reduce(function(uniq,value,index){if(index===0||!equal(sorted[index-1],value))uniq.push(value);return uniq},[])});function equal(a,b){return a[0]===b[0]&&a[1]===b[1]}},{"./gamut.ascending":4,"./gamut.operation":10,"./pitch.simplify":34}],13:[function(require,module,exports){var SEP=/\s*\|\s*|\s*,\s*|\s+/;module.exports=function(source){if(Array.isArray(source))return source;else if(typeof source==="string")return source.trim().split(SEP);else if(source===null||typeof source==="undefined")return[];else return[source]}},{}],14:[function(require,module,exports){"use strict";var kit={};kit.note=require("./note");kit.pitch=require("./pitch");kit.interval=require("./interval");kit.gamut=require("./gamut");kit.scale=require("./scale");module.exports=kit},{"./gamut":9,"./interval":15,"./note":22,"./pitch":30,"./scale":37}],15:[function(require,module,exports){"use strict";module.exports={parse:require("./interval.parse"),build:require("./interval.str")}},{"./interval.parse":16,"./interval.str":17}],16:[function(require,module,exports){"use strict";var INTERVAL=/^([-+]?)(\d+)(d{1,4}|m|M|P|A{1,4}|b{1,4}|#{1,4}|)$/;var TYPES="PMMPPMM";var QALT={P:{dddd:-4,ddd:-3,dd:-2,d:-1,P:0,A:1,AA:2,AAA:3,AAAA:4},M:{ddd:-4,dd:-3,d:-2,m:-1,M:0,A:1,AA:2,AAA:3,AAAA:4}};var cache={};module.exports=function(str){if(typeof str!=="string")return null;return str in cache?cache[str]:cache[str]=parse(str)};var BASES=[[0,0],[2,-1],[4,-2],[-1,1],[1,0],[3,-1],[5,-2]];function parse(str){var m=INTERVAL.exec(str);if(!m)return null;var dir=m[1]==="-"?-1:1;var num=+m[2]-1;var simple=num%7;var base=BASES[simple];var alt;if(m[3]==="")alt=0;else if(m[3][0]==="#")alt=m[3].length;else if(m[3][0]==="b")alt=-m[3].length;else{alt=QALT[TYPES[simple]][m[3]];if(typeof alt==="undefined")return null}var oct=dir*Math.floor(num/7);return[dir*base[0]+7*alt,oct+dir*base[1]-4*alt]}},{}],17:[function(require,module,exports){"use strict";var props=require("./pitch.props");var cache={};module.exports=function(arr){if(!Array.isArray(arr)||arr.length!==2)return null;var str="|"+arr[0]+"|"+arr[1];return str in cache?cache[str]:cache[str]=build(arr)};var ALTER={P:["dddd","ddd","dd","d","P","A","AA","AAA","AAAA"],M:["ddd","dd","d","m","M","A","AA","AAA","AAAA"]};var TYPES="PMMPPMM";function build(coord){var p=props(coord);var t=TYPES[p[0]];var dir,num,alt;if(p[2]<0){dir=-1;num=8-p[0]-7*(p[2]+1);alt=t==="P"?-p[1]:-(p[1]+1)}else{dir=1;num=p[0]+1+7*p[2];alt=p[1]}var q=ALTER[t][4+alt];return dir*num+q}},{"./pitch.props":33}],18:[function(require,module,exports){var curry=require("./_curry2");var operation=require("./pitch.operation");module.exports=curry(operation(function(a,b){if(!Array.isArray(a)||!Array.isArray(b)||a.length===1||b.length===1)return null;return[b[0]-a[0],b[1]-a[1]]}))},{"./_curry2":1,"./pitch.operation":31}],19:[function(require,module,exports){"use strict";var transpose=require("./note.transpose");var ASC=[-12,7];var DESC=[12,-7];module.exports=function(pitch){var enharmonics=[];enharmonics.push(transpose(DESC,pitch));enharmonics.push(pitch);enharmonics.push(transpose(ASC,pitch));return enharmonics}},{"./note.transpose":28}],20:[function(require,module,exports){"use strict";var midi=require("./note.midi");module.exports=function freq(tuning,pitch){tuning=tuning||440;if(arguments.length>1)return freq(tuning)(pitch);return function(p){if(!isNaN(p))return p;var m=midi(p);if(!m)return null;return Math.pow(2,(m-69)/12)*tuning}}},{"./note.midi":23}],21:[function(require,module,exports){"use strict";var CHROMATIC=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"];module.exports=function(midi){if(isNaN(midi)||midi<0||midi>127)return null;var name=CHROMATIC[midi%12];var oct=Math.floor(midi/12)-1;return name+oct}},{}],22:[function(require,module,exports){"use strict";function note(str){return note.str(note.parse(str))}note.parse=require("./note.parse");note.str=require("./note.str");note.midi=require("./note.midi");note.fromMidi=require("./note.fromMidi");note.freq=require("./note.freq");note.pitchClass=require("./note.pitchClass");note.setOctave=require("./note.setOctave");note.enharmonics=require("./note.enharmonics");note.transpose=require("./note.transpose");note.distance=require("./note.distance");module.exports=note},{"./note.distance":18,"./note.enharmonics":19,"./note.freq":20,"./note.fromMidi":21,"./note.midi":23,"./note.parse":24,"./note.pitchClass":25,"./note.setOctave":26,"./note.str":27,"./note.transpose":28}],23:[function(require,module,exports){"use strict";var height=require("./pitch.height");module.exports=function(note){var m=height(note)+12;return m<0||m>127?null:m}},{"./pitch.height":29}],24:[function(require,module,exports){"use strict";var REGEX=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)(?:\/(\d+))?$/;var BASES={C:[0,0],D:[2,-1],E:[4,-2],F:[-1,1],G:[1,0],A:[3,-1],B:[5,-2]};var cache={};module.exports=function(str){return str in cache?cache[str]:cache[str]=parse(str)};function parse(str){var m=REGEX.exec(str);if(!m)return null;var base=BASES[m[1].toUpperCase()];var alt=m[2].replace(/x/g,"##").length;if(m[2][0]==="b")alt*=-1;var fifths=base[0]+7*alt;if(!m[3])return[fifths];var oct=+m[3]+base[1]-4*alt;return[fifths,oct,m[4]?+m[4]:null]}},{}],25:[function(require,module,exports){"use strict";var operation=require("./pitch.operation");module.exports=operation(function(n){return[n[0]]})},{"./pitch.operation":31}],26:[function(require,module,exports){var curry=require("./_curry2");var operation=require("./pitch.operation");module.exports=curry(operation(function(oct,n){if(!Array.isArray(n))return null;return[n[0],-Math.floor(n[0]*7/12)+oct,n[2]||null]}))},{"./_curry2":1,"./pitch.operation":31}],27:[function(require,module,exports){"use strict";var props=require("./pitch.props");var cache={};module.exports=function(arr){if(!Array.isArray(arr)||arr.length<1||arr.length===2)return null;var str="|"+arr[0]+"|"+arr[1]+"|"+arr[2];return str in cache?cache[str]:cache[str]=build(arr)};function accidentals(num){if(num<0)return Array(-num+1).join("b");else if(num>0)return Array(num+1).join("#");else return""}var LETTER=["C","D","E","F","G","A","B"];function build(coord){var p=props(coord);return LETTER[p[0]]+accidentals(p[1])+(p[2]!==null?p[2]:"")+(p[3]!==null?p[3]:"")}},{"./pitch.props":33}],28:[function(require,module,exports){var operation=require("./pitch.operation");var curry=require("./_curry2");module.exports=curry(operation(function(i,n){if(i===false)return n;else if(!Array.isArray(i)||!Array.isArray(n))return null;else if(i.length===1||n.length===1)return[n[0]+i[0]];var d=i.length===2&&n.length===2?null:n[2]||i[2];return[n[0]+i[0],n[1]+i[1],d]}))},{"./_curry2":1,"./pitch.operation":31}],29:[function(require,module,exports){"use strict";var operation=require("./pitch.operation");module.exports=operation(function(p){if(!Array.isArray(p))return-Infinity;var f=p[0]*7;var o=p[1]||p[1]===0?p[1]:-Math.floor(f/12)-10;return f+o*12})},{"./pitch.operation":31}],30:[function(require,module,exports){"use strict";module.exports={parse:require("./pitch.parse"),str:require("./pitch.str"),props:require("./pitch.props"),simplify:require("./pitch.simplify"),height:require("./pitch.height"),operation:require("./pitch.operation")}},{"./pitch.height":29,"./pitch.operation":31,"./pitch.parse":32,"./pitch.props":33,"./pitch.simplify":34,"./pitch.str":35}],31:[function(require,module,exports){var parse=require("./pitch.parse");var build=require("./pitch.str");module.exports=function(fn){return function(a,b){var pa=parse(a);var pb=parse(b);if(!pa&&!pb)return fn(a,b);var v=fn(pa||a,pb||b);return build(v)||v}}},{"./pitch.parse":32,"./pitch.str":35}],32:[function(require,module,exports){var pn=require("./note.parse");var pi=require("./interval.parse");module.exports=function(n){return pn(n)||pi(n)}},{"./interval.parse":16,"./note.parse":24}],33:[function(require,module,exports){"use strict";var BASES=[[3,1],[0,0],[4,0],[1,-1],[5,-1],[2,-2],[6,-2],[3,-3]];module.exports=function(arr){if(!Array.isArray(arr))return null;var index=(arr[0]+1)%7;if(index<0)index=7+index;var base=BASES[index];var alter=Math.floor((arr[0]+1)/7);var oct=arr.length===1?null:arr[1]-base[1]+alter*4;var dur=arr[2]?"/"+arr[2]:null;return[base[0],alter,oct,dur]}},{}],34:[function(require,module,exports){var operation=require("./pitch.operation");module.exports=operation(function(p){if(!Array.isArray(p))return null;return p.length===2?[p[0],-Math.floor(p[0]*7/12)]:[p[0]]})},{"./pitch.operation":31}],35:[function(require,module,exports){var ns=require("./note.str");var is=require("./interval.str");module.exports=function(n){return ns(n)||is(n)}},{"./interval.str":17,"./note.str":27}],36:[function(require,module,exports){"use strict";var scales=require("./data/scales");var transpose=require("./note.transpose");var NONE={name:null,intervals:[],aliases:[],binary:null,decimal:null};var NAME=/^([^\s]+)\s(.*)$/;module.exports=function(name){var m=NAME.exec(name);var tonic=m?m[1]:null;var type=m?m[2]:name.toString();type=type?type.trim().toLowerCase():type;var def=scales[type];if(!def)return NONE;var tonicify=function(t){return tonic?tonic+" "+t:t};return{name:tonicify(def.name),aliases:def.aliases.map(tonicify),binary:def.binary,decimal:def.decimal,intervals:def.intervals.slice(),tonic:tonic,notes:tonic?def.intervals.map(transpose(tonic)):[]}}},{"./data/scales":3,"./note.transpose":28}],37:[function(require,module,exports){var scale=require("./gamut.scale");scale.pattern=require("./scale.pattern");scale.get=require("./scale.get");scale.names=require("./scale.names");module.exports=scale},{"./gamut.scale":11,"./scale.get":36,"./scale.names":38,"./scale.pattern":39}],38:[function(require,module,exports){"use strict";var data=require("./data/scales.json");module.exports=function(){if(arguments.length===0)return Object.keys(data)}},{"./data/scales.json":2}],39:[function(require,module,exports){"use strict";var split=require("./gamut.split");var operation=require("./gamut.operation");var scale=require("./gamut.scale");var transpose=require("./note.transpose");var STEPS=[3,0,4,1,5,2,6];module.exports=function pattern(pttn,notes){if(arguments.length===2)return pattern(pttn)(notes);return operation(function(g){var nums=split(pttn).map(function(n){return+n-1});var index=[];scale(g,false).forEach(function(item){var fifths=(item[0]+1)%7;index[STEPS[fifths]]=item});var selected=nums.map(function(n){var i=index[n%7];if(i&&n>6){i=i.slice();i[1]=i[1]+Math.floor(n/7)}return i});return selected.map(transpose(g[0]))})}},{"./gamut.operation":10,"./gamut.scale":11,"./gamut.split":13,"./note.transpose":28}]},{},[14]);